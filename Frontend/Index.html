<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mundo PC - Encuentra tu computadora ideal</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .loading-products {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .product-card {
            transition: transform 0.3s;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }
    </style>
</head>
<body>
    <header class="header">
    <div class="nav-container container">
        <div class="logo">
            Mundo Pc 
            <img src="Logo.png" alt="Mundo Pc">
        </div>
        <nav>
            <ul class="nav-menu">
                <li><a href="Index.html">Inicio</a></li>
                <li><a href="Productos.html">Productos</a></li>
                <li><a href="Carrito.html" class="cart">Carrito üõí</a></li>
                <li id="authLink"><a href="login.html" style="color: #fff;">Iniciar Sesi√≥n</a></li>
            </ul>
        </nav>
    </div>
</header>

    <section class="hero container">
        <div class="hero-content">
            <h1>Encuentra tu<br>computadora<br>ideal aqu√≠</h1>
        </div>
        <div class="hero-image"><img src="Pc1.png" alt=""></div>
    </section>

    <div class="container">
        <section class="categories">
            <h2 class="section-title">Categor√≠as</h2>
            <div class="grid grid-auto-fit">
                <a href="Productos.html?categoria=escritorio">
                    <div class="card card-center category-card">
                    <span class="category-icon">üñ•Ô∏è</span>
                    <h3>Escritorio</h3>
                </div></a>
                <a href="Productos.html?categoria=portatil">
                <div class="card card-center category-card">
                    <span class="category-icon">üíª</span>
                    <h3>Port√°til</h3>
                </div></a>
                <a href="Productos.html?categoria=componentes">
                <div class="card card-center category-card">
                    <span class="category-icon">‚öôÔ∏è</span>
                    <h3>Componentes</h3>
                </div></a>
                <a href="Productos.html?categoria=perifericos">
                <div class="card card-center category-card">
                    <span class="category-icon">üñ®Ô∏è</span>
                    <h3>Accesorios</h3>
                </div></a>
            </div>
        </section>

        <section class="products">
           <h2 class="section-title">Productos destacados</h2>
           
           <div id="loadingProducts" class="loading-products">
               üîÑ Cargando productos destacados...
           </div>

           <div id="productsGrid" class="grid grid-products" style="display: none;"></div>
        </section>

        <section class="featured-product" id="featuredSection" style="display: none;">
            <div class="featured-image" id="featuredImage">
                <div style="font-size: 150px; display: flex; align-items: center; justify-content: center; height: 100%;">üíª</div>
            </div>
            <div class="featured-content">
                <h2 id="featuredTitle">Producto destacado</h2>
                <div id="featuredDescription" style="color: #666; margin: 20px 0;"></div>
                <p class="featured-description" id="featuredCategory"></p>
                <div style="font-size: 32px; color: #2980b9; font-weight: bold; margin: 20px 0;" id="featuredPrice"></div>
                <a href="#" id="featuredLink" class="btn">Ver producto</a>
            </div>
        </section>
    </div>

    <script>
        const API_URL = "http://localhost:3000/api/products";

        function formatPrice(price) {
            return "$" + Math.round(price).toLocaleString("es-CO");
        }

        function getCategoryEmoji(categoria) {
            const emojis = {
                'escritorio': 'üñ•Ô∏è',
                'portatil': 'üíª',
                'perifericos': '‚å®Ô∏è',
                'componentes': 'üîß'
            };
            return emojis[categoria?.toLowerCase()] || 'üíª';
        }

        async function loadFeaturedProducts() {
            try {
                const response = await fetch(API_URL);
                
                if (!response.ok) {
                    throw new Error('Error al cargar productos');
                }

                const products = await response.json();
                
                if (products && products.length > 0) {
                    displayFeaturedProducts(products);
                    displayFeaturedProduct(products);
                }
                
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('loadingProducts').innerHTML = '‚ö†Ô∏è Error al cargar productos';
            }
        }

        function displayFeaturedProducts(products) {
            const grid = document.getElementById('productsGrid');
            const featured = products.slice(0, 4);

            grid.innerHTML = featured.map(product => `
                <div class="card product-card">
                    <div class="product-image image-container" style="font-size: 80px; height: 200px; display: flex; align-items: center; justify-content: center; background: linear-gradient(145deg, #f0f0f0, #e8e8e8); border-radius: 15px;">
                        ${getCategoryEmoji(product.categoria)}
                    </div>
                    <h3 class="product-card h3">${product.nombre.substring(0, 40)}${product.nombre.length > 40 ? '...' : ''}</h3>
                    <div class="product-price">${formatPrice(product.precio)}</div>
                    <a href="producto-detalle.html?id=${product.id}" class="btn">Ver producto</a>
                </div>
            `).join('');

            document.getElementById('loadingProducts').style.display = 'none';
            grid.style.display = 'grid';
        }

        function displayFeaturedProduct(products) {
            const escritorios = products.filter(p => p.categoria?.toLowerCase() === 'escritorio');
            
            if (escritorios.length > 0) {
                const featured = escritorios[0];
                const section = document.getElementById('featuredSection');
                
                document.getElementById('featuredImage').innerHTML = `
                    <div style="font-size: 150px; display: flex; align-items: center; justify-content: center; height: 100%;">
                        ${getCategoryEmoji(featured.categoria)}
                    </div>
                `;
                document.getElementById('featuredTitle').textContent = featured.nombre;
                document.getElementById('featuredDescription').textContent = featured.descripcion || 'Producto de alta calidad';
                document.getElementById('featuredCategory').textContent = `Categor√≠a: ${featured.categoria}`;
                document.getElementById('featuredPrice').textContent = formatPrice(featured.precio);
                document.getElementById('featuredLink').href = `producto-detalle.html?id=${featured.id}`;
                
                section.style.display = 'grid';
            }
        }

        document.querySelectorAll('.card').forEach(card => {
            card.addEventListener('click', function(e) {
                if (!e.target.closest('a')) {
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 150);
                }
            });
        });

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });

        document.addEventListener('DOMContentLoaded', () => {
            loadFeaturedProducts();
        });
    </script>

    <script src="js/navigation.js"></script>
</body>
</html>